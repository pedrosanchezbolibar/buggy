<html 
	xmlns:concordion="http://www.concordion.org/2007/concordion" 
	xmlns:ext="urn:concordion-extensions:2010">

	<head>
		<title>Buggy automatic tests</title>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	</head>	

	<body>
		<h1>Insert a trade using DataUploader</h1>		
		
		

	<h2>Description</h2>

	<p>
		(...)
	</p>

	<h2>Test Data</h2>

	<p>
		Template: <span concordion:execute="setProperty('TEMPLATE', #TEXT)">insert.xml</span>
		CPTY<span concordion:execute="setProperty('CPTY', #TEXT)">KK</span>.
		<span style="visibility: hidden;" concordion:set="#img">trade.png</span>
		<span ext:embed="getImage(#img)"> </span>
	</p>
	
	<p>
		La External Reference de la operación 
		<span concordion:execute="#extRef=generateExternalRef()"> </span>  
		<span concordion:execute="setProperty('EXTERNAL_REFERENCE', #extRef)"> </span>
	</p>

	<h2>Test</h2>

	<p>
		Insertamos la operación. La operación insertada será copia de la operación de producción: 
		<span concordion:execute="#ack=insertCDUFTrade()"> </span> 
	</p>

	<h2>Results</h2>
	
	<pre>
<span concordion:echo="#ack"> </span>
	</pre>
	
	<p>
		Comprobamos que se ha insertado correctamente la operación:
	</p>

	<table concordion:execute="#trade=getTrade(#ack)">
		<tr>
			<th concordion:echo="#trade.id">Id</th>
			<th concordion:assertEquals="#trade.productType">Product type</th>
			<th concordion:assertEquals="#trade.status">Status</th>
			<th concordion:assertEquals="#trade.counterParty">Cpty</th>
			<th concordion:assertEquals="#trade.tradeCurrency">Currency</th>
			<th concordion:assertEquals="#trade.tradeDate">Trade Date</th>
			<th concordion:assertEquals="#trade.settleDate">Settle Date</th>
		</tr>
		<tr>
			<td></td>
			<td>InterestBearing</td>
			<td>PENDING</td>
			<td>AAT_160621MACQUARIEC_NOSDI</td>
			<td>EUR</td>
			<td>28/02/28 22:01:34.450 o'clock CET</td>
			<td>02/03/2028</td>
		</tr>
	</table>

</body>
</html>